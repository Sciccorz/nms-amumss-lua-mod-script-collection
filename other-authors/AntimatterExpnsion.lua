NMS_ITEMS_SUBSTANCE = {
  "LAND1","LAND2","LAND3",                                    -- 铁氧体粉末、纯铁氧体、磁化铁氧体
  "FUEL1","FUEL2","OXYGEN",                                   -- 碳、浓缩碳、氧气
  "LAUNCHSUB", "LAUNCHSUB2", "ROCKETSUB",                     -- 二氢、氘、氚
  "CATALYST1","CATALYST2","WATER1","WATER2",                  -- 钠、硝酸钠、盐、氯气
  "CAVE1", "CAVE2", "SAND1", "LAVA1", "WATERPLANT",           -- 钴、离子钴、硅酸盐粉末、玄武岩、磷酸细胞
  "ASTEROID1", "ASTEROID2", "ASTEROID3",                      -- 银、金、铂
  "LUSH1", "TOXIC1", "COLD1", "HOT1", "RADIO1", "DUSTY1",     -- 矿脂、氨、二氧化物、磷、铀、黄铁矿
  "PLANT_LUSH", "PLANT_TOXIC", "PLANT_SNOW",                  -- 星辰朵、真菌团、冰霜水晶
  "PLANT_HOT", "PLANT_RADIO", "PLANT_DUST",                   -- 日光茄、伽马根、仙人掌肉
  "PLANT_CAVE", "PLANT_WATER",                                -- 葫芦朵、海藻袋
  "YELLOW2", "RED2", "GREEN2", "BLUE2", "STELLAR2",           -- 铜、镉、艾梅里尔、铟、有色金属
  "EX_YELLOW", "EX_RED", "EX_GREEN", "EX_BLUE",               -- 活性铜、活性镉、活性艾梅里尔、活性铟
  "CREATURE1", "PLANT_POOP", "GAS1", "GAS2", "GAS3",          -- 腐藤、屎球菌、硫磺、氡气、氮气
  "ROBOT1", "ROBOT2", "SOULFRAG", "SUNGOLD",                  -- 普茵、亚特拉迪姆、破碎的质感、液体太阳
  "SPECIAL_POOP", "BUI_SCRAP", "SPACEGUNK3", "AF_METAL",      -- 己糖醇、虚空微粒、生锈的金属、污染的金属
  "SPACEGUNK1", "SPACEGUNK5", "SPACEGUNK4", "SPACEGUNK2",     -- 剩余粘稠物、粘性流质、活体黏质、失控的模具
  "WORMDUST", "TIMEDUST", "TIMEMILK", "SQUIDFRAG",            -- 诅咒之尘、索姆纳尔灰尘、先祖记忆、残缺质感
}

NMS_ITEMS_PRODUCT = {
  "SUIT_INV_TOKEN", "SHIP_INV_TOKEN", "WEAP_INV_TOKEN", "FREI_INV_TOKEN",                     -- 套装扩展装置、储备扩充、多用途工具扩展栏位、货物舱壁
  "BP_SALVAGE", "FRIG_TOKEN", "FACT_TOKEN", "STATION_KEY", "TECHBOX", "ALIEN_TECHBOX",        -- 已回收的数据、已回收的护卫舰模块、工厂超控单元、空间站超控、记忆碎片、心灵之卵
  "ABAND_LOCATOR", "POI_LOCATOR", "CHART_ROBOT", "CHART_TREASURE", "CHART_HIVE",              -- 紧急信号扫描仪、异象探测器、回音定位器、遗物藏宝图、护卫边界地图
  "NAV_DATA_DROP", "STARCHART_A", "STARCHART_B", "STARCHART_C", "STARCHART_D", "CHART_SETTLE",-- 套装升级图纸、星图（兴趣点）、星图（求救信号）、星图（前哨基站）、星图（外星遗物）、定居点图表
  "SHIP_CORE_S", "SHIP_CORE_A", "SHIP_CORE_B", "SHIP_CORE_C",                                 -- S级反应堆、A级反应堆、B级反应堆、C级反应堆
  "PRODFUEL2", "POWERCELL", "AMMO", "GRENFUEL1", "NAV_DATA",                                  -- 维生凝胶、离子电池、炮弹弹药、不稳定的等离子、导航数据
  "LAUNCHFUEL", "SHIPCHARGE", "HYPERFUEL1", "HYPERFUEL2", "POLICE_TOKEN",                     -- 飞船发射燃料、星盾电池、曲速电池、曲速超核心、防御便函
  "CASING", "NANOTUBES", "CARBON_SEAL", "AM_HOUSING", "MICROCHIP",                            -- 金属电镀、碳纳米管、密封剂、反物质外壳、微处理器
  "HYDRALIC", "MAGNET", "MIRROR", "BIO", "COMPUTER", "JELLY",                                 -- 水力线路、磁性共振器、太阳能镜、氨基舱、量子电脑、二氢凝胶
  "ALLOY1", "ALLOY2", "ALLOY3", "ALLOY4", "ALLOY5", "ALLOY6", "ALLOY7", "ALLOY8",             -- 阿洛姆、肮脏青铜、赫罗克斯、列米姆、镍锰金、格兰丁、晶土矿、辐矿
  "GEODE_LAND", "GEODE_CRYSTAL", "GEODE_ASTEROID", "GEODE_SPACE", "GEODE_RARE",               -- 晶球、水晶碎片、金块、超级氚团、发光的矿物
  "STORM_CRYSTAL", "VENTGEM", "HEXCORE", "NIPNIPBUDS", "FISHCORE", "CAVECUBE",                -- 风暴水晶、硫化晶体、六核、吸吸幼芽、超深渊核心、漩涡立方
  "SACVENOM", "ALBUMENPEARL", "GRAVBALL", "CLAMPEARL", "EYEBALL", "FIENDCORE",                -- 囊袋毒液、蛋白珍珠、引力微子球、活体珍珠、催眠之眼、幼虫核心
  "TRA_CURIO1", "TRA_CURIO2", "WAR_CURIO1", "WAR_CURIO2", "EXP_CURIO1", "EXP_CURIO2",         -- 吉克遗物、吉克小吸、维吉恩雕像、维吉恩匕首、科尔瓦克斯外壳、集会方形箱
  "QUAD_PROD", "MECH_PROD", "WALKER_PROD", "SHIPBRAIN", "SENTFREI_PROD",                      -- 四足机甲伺服系统、强化外壳驱动器、步行机脑、透明质脑部、航空母舰人工智能碎片
  "SENTINEL_LOOT", "DRONE_SHARD", "SPIDER_PROD", "DRONE_SALVAGE", "SHIPBRAIN_CLEAN",          -- 回收玻璃、光耀碎片、结晶心脏、反转镜面、谐波脑部
  "SALVAGE_TECH1", "SALVAGE_TECH2", "SALVAGE_TECH3", "SALVAGE_TECH4", "SALVAGE_TECH5",        -- 曾经有用的弹簧、几个轮齿、强化管道、隔热板、合金废料
  "SALVAGE_TECH6", "SALVAGE_TECH7", "SALVAGE_TECH8", "SALVAGE_TECH9", "SALVAGE_TECH10",       -- 纳米电缆卷、回收电路、亚原子调节器、压缩铟碎片、飞船AI阀门
  "TRA_ALLOY1", "TRA_ALLOY2", "TRA_ALLOY3", "TRA_ALLOY4", "TRA_ALLOY5",                       -- 纳米管箱、自我修复海瑞蒂姆、光学溶剂、五维环面、超导纤维
  "TRA_COMMODITY1", "TRA_COMMODITY2", "TRA_COMMODITY3", "TRA_COMMODITY4", "TRA_COMMODITY5",   -- 破译的用户资料、星绸、星露、离子球体、传送协调器
  "TRA_COMPONENT1", "TRA_COMPONENT2", "TRA_COMPONENT3", "TRA_COMPONENT4", "TRA_COMPONENT5",   -- 巨大的金属齿轮、不粘活塞、网孔去耦器、全息曲柄、向量压缩机
  "TRA_ENERGY1", "TRA_ENERGY2", "TRA_ENERGY3", "TRA_ENERGY4", "TRA_ENERGY5",                  -- 电火花罐、工业级电池、电阻凝胶、试验性能源液体、融合核心
  "TRA_EXOTICS1", "TRA_EXOTICS2", "TRA_EXOTICS3", "TRA_EXOTICS4", "TRA_EXOTICS5",             -- 去味瓶、中子显微镜、不稳定注射器、活体导管、神经导管
  "TRA_MINERALS1", "TRA_MINERALS2", "TRA_MINERALS3", "TRA_MINERALS4", "TRA_MINERALS5",        -- 尘土、未提炼黄铁脂、溴化盐、五彩锆、再结晶弧形水晶
  "TRA_TECH1", "TRA_TECH2", "TRA_TECH3", "TRA_TECH4", "TRA_TECH5",                            -- 报废电路板、焊接皂、离子电容器、自动定位单元、量子加速器
  "ILLEGAL_PROD1", "ILLEGAL_PROD2", "ILLEGAL_PROD3", "ILLEGAL_PROD4",                         -- 血盐、失窃的DNA样本、月之以太、棱镜羽毛
  "ILLEGAL_PROD5", "ILLEGAL_PROD6", "ILLEGAL_PROD7", "ILLEGAL_PROD8",                         -- 格拉格拉、伪造电路、违禁武器、初代遗物
  "FARMPROD1", "FARMPROD2", "FARMPROD3", "FARMPROD4", "FARMPROD5", "FARMPROD6",               -- 酸、润滑剂、玻璃、热电容、聚乙烯纤维、不稳定的凝胶
  "FARMPROD7", "FARMPROD8", "FARMPROD9", "REACTION1", "REACTION2", "REACTION3",               -- 液体炸弹、活体玻璃、电路板、热凝物、浓化碳、氮盐
  "COMPOUND1", "COMPOUND2", "COMPOUND3", "COMPOUND4", "COMPOUND5", "COMPOUND6",               -- 有机催化剂、半导体、热冰、熔合触媒、超导体、冷沉淀泵
  "MEGAPROD1", "MEGAPROD2", "MEGAPROD3", "ULTRAPROD1", "ULTRAPROD2",                          -- 便携式反应器、量子处理器、低温舱、核融起爆机、休眠设备
  "REPAIRKIT", "PIRATE_PROD", "REP_TOKEN", "SCRAP_GOODS", "SCRAP_WEAP", "SCRAP_TECH",         -- 修复套件、海盗应答器、伪造护照、可疑的包裹（货物）、可疑的包裹（武装）、可疑的包裹（技术）
  "ARTIFACT_KEY", "ODD_EGG", "EXPD_ODD_EGG"
}

function newRecipe(recipeType, result, resultType, resultAmount, ingredient1, ingredient1Type, ingredient1Amount, ingredient2, ingredient2Type, ingredient2Amount, ingredient3, ingredient3Type, ingredient3Amount)
  local recipe = ""
  recipe = recipe .. [[
  <Property value="GcRefinerRecipe.xml">
    <Property name="Id" value="REFINERECIPE_]] .. result .. [[" />
    <Property name="RecipeType" value="RECIPE_]].. recipeType .. [[" />
    <Property name="RecipeName" value="R_NAME_]].. recipeType .. [[" />
    <Property name="TimeToMake" value="1" />
    <Property name="Cooking" value="False" />
    <Property name="Result" value="GcRefinerRecipeElement.xml">
      <Property name="Id" value="]] .. result .. [[" />
      <Property name="Type" value="GcInventoryType.xml">
        <Property name="InventoryType" value="]] .. resultType .. [[" />
      </Property>
      <Property name="Amount" value="]] .. tostring(resultAmount) .. [[" />
    </Property>
    <Property name="Ingredients">
      <Property value="GcRefinerRecipeElement.xml">
        <Property name="Id" value="]] .. ingredient1 .. [[" />
        <Property name="Type" value="GcInventoryType.xml">
          <Property name="InventoryType" value="]] .. ingredient1Type .. [[" />
        </Property>
        <Property name="Amount" value="]] .. tostring(ingredient1Amount) .. [[" />
      </Property>
]]
  if ingredient2 ~= nil then
      recipe = recipe .. [[
      <Property value="GcRefinerRecipeElement.xml">
        <Property name="Id" value="]] .. ingredient2 .. [[" />
        <Property name="Type" value="GcInventoryType.xml">
          <Property name="InventoryType" value="]] .. ingredient2Type .. [[" />
        </Property>
        <Property name="Amount" value="]] .. tostring(ingredient2Amount) .. [[" />
      </Property>
]]
  end
  if ingredient3 ~= nil then
      recipe = recipe .. [[
      <Property value="GcRefinerRecipeElement.xml">
        <Property name="Id" value="]] .. ingredient3 .. [[" />
        <Property name="Type" value="GcInventoryType.xml">
          <Property name="InventoryType" value="]] .. ingredient3Type .. [[" />
        </Property>
        <Property name="Amount" value="]] .. tostring(ingredient3Amount) .. [[" />
      </Property>
]]
  end
  recipe = recipe .. [[
    </Property>
  </Property>
]]
  return recipe
end

local RECIPES = ""

-- 全资源扩张
for i,v in ipairs(NMS_ITEMS_SUBSTANCE) do
  RECIPES = RECIPES .. newRecipe("ASTEROID3", v, "Substance", 100, "ANTIMATTER", "Product", 1, v, "Substance", 1)
end
-- 全产品扩张
for i,v in ipairs(NMS_ITEMS_PRODUCT) do
  RECIPES = RECIPES .. newRecipe("ASTEROID3", v, "Product", 20, "ANTIMATTER", "Product", 1, v, "Product", 1)
end
-- 反物质复制
RECIPES = RECIPES .. newRecipe("LAND1_ROBOT1", "ANTIMATTER", "Product", 20, "ANTIMATTER", "Product", 1)

NMS_MOD_DEFINITION_CONTAINER = {
    ["MOD_FILENAME"] = "ZNE_AntimatterExpansion.pak",
    ["MOD_AUTHOR"] = "ZNECrode",
    ["LUA_AUTHOR"] = "ZNECrode",
    ["NMS_VERSION"] = "5.22",
    ["MOD_DESCRIPTION"] = "Use Antimatter in refiner to expand other substance",
    ["MODIFICATIONS"] = {
        {
            ["MBIN_CHANGE_TABLE"] = {
                { -- More Refining
                    ["MBIN_FILE_SOURCE"] = "METADATA\REALITY\TABLES\NMS_REALITY_GCRECIPETABLE.MBIN",
                    ["EXML_CHANGE_TABLE"] = {
                        {
                            ["PRECEDING_KEY_WORDS"] = {"Table"},
                            ["ADD_OPTION"] = "ADDafterLINE",
                            ["ADD"] = RECIPES
                        }
                    }
                }
            }
        }
    }
}