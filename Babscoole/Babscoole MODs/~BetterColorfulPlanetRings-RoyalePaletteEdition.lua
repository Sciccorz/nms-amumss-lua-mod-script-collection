DataTable =
{
    {
        ["PALETTE"] = "PlanetRing",
        ["NUMCOLOURS"] = "All",
        ["COLOURS"] =
        {
            {["R"]="0.263", ["G"]="0.337", ["B"]="1.0",   ["A"]="1"},
            {["R"]="0.776", ["G"]="0.463", ["B"]="0.031", ["A"]="1"},
            {["R"]="0.697", ["G"]="0.669", ["B"]="0",     ["A"]="1"},
            {["R"]="0.605", ["G"]="0.857", ["B"]="0.018", ["A"]="1"},
            {["R"]="0.827", ["G"]="0.725", ["B"]="0.086", ["A"]="1"},
            {["R"]="0.011", ["G"]="1",     ["B"]="0.782", ["A"]="1"},
            {["R"]="0.518", ["G"]="0.557", ["B"]="0.604", ["A"]="1"},
            {["R"]="0.025", ["G"]="0.707", ["B"]="1",     ["A"]="1"},
            {["R"]="0.088", ["G"]="0.726", ["B"]="1",     ["A"]="1"},
            {["R"]="0.031", ["G"]="0.665", ["B"]="0.963", ["A"]="1"},
            {["R"]="0.587", ["G"]="0.102", ["B"]="1",     ["A"]="1"},
            {["R"]="0.467", ["G"]="0.01",  ["B"]="0.284", ["A"]="1"},
            {["R"]="0.687", ["G"]="0.019", ["B"]="0.286", ["A"]="1"},
            {["R"]="0.22",  ["G"]="0.009", ["B"]="0.009", ["A"]="1"},
            {["R"]="0.677", ["G"]="0.319", ["B"]="0.319", ["A"]="1"},
            {["R"]="1",     ["G"]="0.475", ["B"]="0.359", ["A"]="1"},
            {["R"]="0.626", ["G"]="0.707", ["B"]="0.515", ["A"]="1"},
            {["R"]="0.236", ["G"]="0.524", ["B"]="0.563", ["A"]="1"},
            {["R"]="0.149", ["G"]="0.274", ["B"]="0.41",  ["A"]="1"},
            {["R"]="0.38",  ["G"]="0.442", ["B"]="1",     ["A"]="1"},
            {["R"]="0.767", ["G"]="0.265", ["B"]="0.666", ["A"]="1"},
            {["R"]="0.043", ["G"]="0.587", ["B"]="0.283", ["A"]="1"},
            {["R"]="0.243", ["G"]="0.365", ["B"]="0.498", ["A"]="1"},
            {["R"]="0.467", ["G"]="0.112", ["B"]="0.377", ["A"]="1"},
            {["R"]="0.51",  ["G"]="0.217", ["B"]="0.217", ["A"]="1"},
            {["R"]="0.177", ["G"]="0.049", ["B"]="0.049", ["A"]="1"},
            {["R"]="0.533", ["G"]="0.357", ["B"]="0.161", ["A"]="1"},
            {["R"]="0.053", ["G"]="0.267", ["B"]="0.177", ["A"]="1"},
            {["R"]="0.051", ["G"]="0.099", ["B"]="0.137", ["A"]="1"},
            {["R"]="0.22",  ["G"]="0.121", ["B"]="0.213", ["A"]="1"},
            {["R"]="0.647", ["G"]="0.122", ["B"]="0.007", ["A"]="1"},
            {["R"]="0.044", ["G"]="0.503", ["B"]="0.543", ["A"]="1"},
            {["R"]="0.283", ["G"]="0.05",  ["B"]="0.403", ["A"]="1"},
            {["R"]="0.389", ["G"]="0.47",  ["B"]="0.02",  ["A"]="1"},
            {["R"]="0.255", ["G"]="0.599", ["B"]="0.917", ["A"]="1"},
            {["R"]="0.387", ["G"]="0.571", ["B"]="1",     ["A"]="1"},
            {["R"]="0.373", ["G"]="0.557", ["B"]="0.327", ["A"]="1"},
            {["R"]="0.45",  ["G"]="0.195", ["B"]="0.2",   ["A"]="1"},
            {["R"]="0.172", ["G"]="0.311", ["B"]="0.56",  ["A"]="1"},
            {["R"]="0.71",  ["G"]="0.518", ["B"]="0.177", ["A"]="1"},
            {["R"]="0.51",  ["G"]="0.286", ["B"]="0.398", ["A"]="1"},
            {["R"]="0.653", ["G"]="0.154", ["B"]="0.154", ["A"]="1"},
            {["R"]="0.369", ["G"]="0.223", ["B"]="0.483", ["A"]="1"},
            {["R"]="0.453", ["G"]="0.065", ["B"]="0.259", ["A"]="1"},
            {["R"]="0.061", ["G"]="0.387", ["B"]="0.269", ["A"]="1"},
            {["R"]="0.527", ["G"]="0.419", ["B"]="0.419", ["A"]="1"},
            {["R"]="0.506", ["G"]="0.212", ["B"]="0.184", ["A"]="1"},
            {["R"]="0.045", ["G"]="0.036", ["B"]="0.26",  ["A"]="1"},
            {["R"]="0.456", ["G"]="0.79",  ["B"]="0.73",  ["A"]="1"},
            {["R"]="0.236", ["G"]="0.566", ["B"]="0.87",  ["A"]="1"},
            {["R"]="0.68",  ["G"]="0.524", ["B"]="0.813", ["A"]="1"},
            {["R"]="0.897", ["G"]="0.518", ["B"]="0.76",  ["A"]="1"},
            {["R"]="1",     ["G"]="1",     ["B"]="1",     ["A"]="1"},
            {["R"]="0.297", ["G"]="0.297", ["B"]="0.297", ["A"]="1"},
            {["R"]="0.549", ["G"]="0.216", ["B"]="0.216", ["A"]="1"},
            {["R"]="0.54",  ["G"]="0.368", ["B"]="0.279", ["A"]="1"},
            {["R"]="0.753", ["G"]="0.616", ["B"]="0.441", ["A"]="1"},
            {["R"]="0.243", ["G"]="0.48",  ["B"]="0.342", ["A"]="1"},
            {["R"]="0.243", ["G"]="0.436", ["B"]="0.44",  ["A"]="1"},
            {["R"]="0.233", ["G"]="0.291", ["B"]="0.403", ["A"]="1"},
            {["R"]="0.367", ["G"]="0.28",  ["B"]="0.44",  ["A"]="1"},
            {["R"]="0.56",  ["G"]="0.333", ["B"]="0.424", ["A"]="1"},
            {["R"]="0.667", ["G"]="0.667", ["B"]="0.667", ["A"]="1"},
            {["R"]="-1",    ["G"]="-1",    ["B"]="-1",    ["A"]="1"},
        }
    },
}

NMS_MOD_DEFINITION_CONTAINER =
{
["MOD_FILENAME"]    = "~BetterColorfulPlanetRings.pak",
["MOD_AUTHOR"]      = "Babscoole with Palette by lMonk",
["NMS_VERSION"]     = "4.65",
["MOD_DESCRIPTION"] = "Change palette colors for planetary rings",
["MODIFICATIONS"]   =
    {
        {
            ["MBIN_CHANGE_TABLE"] =
            {
                {
                    ["MBIN_FILE_SOURCE"] = "METADATA\SIMULATION\SOLARSYSTEM\COLOURS\BASECOLOURPALETTES.MBIN",
                    ["EXML_CHANGE_TABLE"] =
                    {
                        {
                            ["SPECIAL_KEY_WORDS"] = {"PlanetRing", "GcPaletteData.xml"},
                            ["VALUE_CHANGE_TABLE"] =
                            {
                                {"NumColours", "All"}
                            }
                        },
                    }
                },
            }
        }
    }
}

function GetColours(R,G,B,A)
    return
    [[
    <Property value="Colour.xml">
          <Property name="R" value="]].. R ..[[" />
          <Property name="G" value="]].. G ..[[" />
          <Property name="B" value="]].. B ..[[" />
          <Property name="A" value="]].. A ..[[" />
        </Property>
    ]]
end

function CreateColoursProperty(PaletteColours)
    local PropertiesString = {}

    for j = 1, #PaletteColours do
        local R = PaletteColours[j]["R"]
        local G = PaletteColours[j]["G"]
        local B = PaletteColours[j]["B"]
        local A = PaletteColours[j]["A"]
        table.insert(PropertiesString,GetColours(R, G, B, A))
    end
    local PropertyColoursString =
    [[      <Property name="Colours">
    ]]..table.concat(PropertiesString)..[[
  </Property>]]

    return PropertyColoursString
end

local BaseColourPalettesTable = NMS_MOD_DEFINITION_CONTAINER["MODIFICATIONS"][1]["MBIN_CHANGE_TABLE"][1]["EXML_CHANGE_TABLE"]
for i = 1, #DataTable do
    local Palette = DataTable[i]["PALETTE"]
    local PaletteColours = DataTable[i]["COLOURS"]
    local PaletteNumColours = DataTable[i]["NUMCOLOURS"]

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours},
        ["PRECEDING_KEY_WORDS"] = {"Colours"},
        ["REMOVE"] = "SECTION"
    }

    BaseColourPalettesTable[#BaseColourPalettesTable +1] =
    {
        ["SPECIAL_KEY_WORDS"] = {Palette, "GcPaletteData.xml", "NumColours", PaletteNumColours},
        ["ADD"] = CreateColoursProperty(PaletteColours)
    }
end